!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():e.Dega=t()}(this,function(){function e(e,t){return t.match(/^\./)?e.classList&&e.classList.contains(t.replace(/^\./,"")):t.match(/^#/)?e.id===t.replace(/^#/,""):e.tagName===t.toUpperCase()}function t(e,t,n,r,i){for(var s=0;s<e.length;s++)if(e[s].original===r&&e[s].useCapture===i&&e[s].type===t&&e[s].selector===n)return e[s];return!1}function n(e,t){return"blur"===e||"focus"===e||t}function r(t,r,i,s){return{type:t,selector:r,useCapture:n(t,s),original:i,generated:function(t){for(var n=t.target;n;){if(e(n,r)){i.call(n,t);break}n=n.parentNode}}}}var i=[],s=function(e){if(!(this instanceof s)){for(var t=0;t<i.length;t++)if(i[t].elem===e)return i[t];var n=new s(e);return i.push(n),n}"string"==typeof e&&(e=document.querySelector(e)),this.elem=e,this._eventListeners=[]};return s.prototype.on=function(e,t,n,i){var s=r(e,t,n,i);return this._eventListeners.push(s),this.elem.addEventListener(e,s.generated,s.useCapture),this},s.prototype.off=function(e,r,i,s){s=n(e,s);var o=t(this._eventListeners,e,r,i,s);return o&&(this.elem.removeEventListener(e,o.generated,o.useCapture),this._eventListeners.splice(this._eventListeners.indexOf(o),1)),this},s});